webpackJsonp([3],{"1Aa/":function(t,e,s){var n=s("adiS"),r=s("biYF")("iterator"),i=s("ZVlJ");t.exports=s("AKd3").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||i.hasOwnProperty(n(e))}},"3cXf":function(t,e,s){t.exports={default:s("RJ+u"),__esModule:!0}},"4X9d":function(t,e){},"5RSw":function(t,e,s){t.exports=s.p+"static/media/click.1a14580.mp3"},"7KPn":function(t,e){},ALn8:function(t,e){},HzJ8:function(t,e,s){t.exports={default:s("oMO2"),__esModule:!0}},KH7x:function(t,e,s){"use strict";e.__esModule=!0;var n=i(s("MGgt")),r=i(s("HzJ8"));function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var s=[],n=!0,i=!1,a=void 0;try{for(var o,c=(0,r.default)(t);!(n=(o=c.next()).done)&&(s.push(o.value),!e||s.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}return s}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},L8d8:function(t,e,s){"use strict";var n=s("rVsN"),r=s.n(n),i=s("aozt"),a=s.n(i);s("ExMv");e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e={};return(e=a.a.create({baseURL:t,timeout:1e4,headers:{"Content-Type":"application/json;charset=UTF-8"}})).interceptors.request.use(function(t){return t},function(t){return r.a.reject(t)}),e.interceptors.response.use(function(t){return t.data},function(t){var e=t;return r.a.reject(e)}),e},e.b=function(t){if(!t||!r.a.prototype.isPrototypeOf(t))return new r.a(function(t,e){e(new Error("requires promises as the param"))}).catch(function(t){return[t,null]});return t.then(function(){return console.log(arguments,"arguments"),[null].concat(Array.prototype.slice.call(arguments))}).catch(function(t){return[t,null]})}},MGgt:function(t,e,s){t.exports={default:s("hWTF"),__esModule:!0}},"RJ+u":function(t,e,s){var n=s("AKd3"),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},XiUR:function(t,e){},aHPK:function(t,e,s){t.exports=s.p+"static/media/hamster.3276056.mp3"},cMFt:function(t,e){t.exports=[{word:"SHEEP",imgUrl:"../../../../assets/img/hamster/SHEEP.jpeg",pronunciation:"../../../../assets/pronunciation/SHEEP.mp3"},{word:"CAT",imgUrl:"../../../../assets/img/hamster/CAT.jpeg",pronunciation:"../../../../assets/pronunciation/CAT.mp3"},{word:"DOG",imgUrl:"../../../../assets/img/hamster/DOG.jpeg",pronunciation:"../../../../assets/pronunciation/DOG.mp3"},{word:"BEAR",imgUrl:"../../../../assets/img/hamster/BEAR.jpeg",pronunciation:"../../../../assets/pronunciation/BEAR.mp3"},{word:"EARTH",imgUrl:"../../../../assets/img/hamster/EARTH.jpeg",pronunciation:"../../../../assets/pronunciation/EARTH.mp3"},{word:"TREE",imgUrl:"../../../../assets/img/hamster/TREE.jpeg",pronunciation:"../../../../assets/pronunciation/TREE.mp3"},{word:"PEN",imgUrl:"../../../../assets/img/hamster/PEN.jpeg",pronunciation:"../../../../assets/pronunciation/PEN.mp3"},{word:"SEA",imgUrl:"../../../../assets/img/hamster/SEA.jpeg",pronunciation:"../../../../assets/pronunciation/SEA.mp3"},{word:"MOON",imgUrl:"../../../../assets/img/hamster/MOON.jpeg",pronunciation:"../../../../assets/pronunciation/MOON.mp3"},{word:"STARS",imgUrl:"../../../../assets/img/hamster/STARS.jpeg",pronunciation:"../../../../assets/pronunciation/STARS.mp3"},{word:"BROOK",imgUrl:"../../../../assets/img/hamster/BROOK.jpeg",pronunciation:"../../../../assets/pronunciation/BROOK.mp3"},{word:"BIRD",imgUrl:"../../../../assets/img/hamster/BIRD.jpeg",pronunciation:"../../../../assets/pronunciation/BIRD.mp3"},{word:"MONKEY",imgUrl:"../../../../assets/img/hamster/MONKEY.jpeg",pronunciation:"../../../../assets/pronunciation/MONKEY.mp3"}]},hWTF:function(t,e,s){s("A1pn"),s("IsPG"),t.exports=s("1Aa/")},"i/bM":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("3cXf"),r=s.n(n),i=s("lC5x"),a=s.n(i),o=s("KH7x"),c=s.n(o),u=s("J0Oq"),l=s.n(u),h=s("L8d8"),m=Object(h.a)("http://tpdoc.cn:3001");function d(t){return t?m.get("/getUserList_hamster?nickname="+t):m.get("/getUserList_hamster")}var f={name:"gameStart",props:["step"],data:function(){return{nickname:"",username:"",userNameExist:!1}},watch:{step:function(t){1===t&&(this.nickname=window.localStorage.getItem("hamster_nickname"))}},methods:{go:function(){var t=this;return l()(a.a.mark(function e(){var s,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$refs.userName.blur(),e.next=3,Object(h.b)((i={nickname:t.username},m.post("/addUser_hamster",i)));case 3:if(s=e.sent,n=c()(s,2),r=n[0],n[1],!r){e.next=10;break}return alert("addUser接口请求失败"+r),e.abrupt("return",!1);case 10:window.localStorage.setItem("hamster_nickname",t.username),t.$emit("play",2);case 12:case"end":return e.stop()}var i},e,t)}))()},play:function(){this.$emit("play",2)},ranking:function(){this.$emit("play",3)},checkUserName:function(){var t=this;return l()(a.a.mark(function e(){var s,n,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(d(t.username));case 2:if(s=e.sent,n=c()(s,2),i=n[0],o=n[1],!i){e.next=9;break}return console.log("请求用户列表失败"),e.abrupt("return",!1);case 9:console.log(r()(o.data),"data"),o.data&&o.data.length?t.userNameExist=!0:t.userNameExist=!1;case 11:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.nickname=window.localStorage.getItem("hamster_nickname")}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"userNameBox"},[s("div",{staticClass:"userNameTop"}),t._v(" "),s("div",{staticClass:"userNameBottom"},[s("div",{staticClass:"userName"},[t.nickname?s("div",[s("button",{staticClass:"ranking",on:{touchstart:t.ranking}}),t._v(" "),s("button",{staticClass:"playButton",on:{touchstart:t.play}},[t._v("PLAY")])]):s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"userName",attrs:{type:"text"},domProps:{value:t.username},on:{input:[function(e){e.target.composing||(t.username=e.target.value)},t.checkUserName]}}),t._v(" "),s("button",{staticClass:"beginButton",attrs:{disabled:!t.username},on:{touchstart:t.go}},[t._v("GO")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.username&&t.userNameExist,expression:"username && userNameExist"}],staticClass:"tip"})])])])])])},staticRenderFns:[]};var p=s("C7Lr")(f,v,!1,function(t){s("ALn8")},"data-v-2602666b",null).exports,g={name:"rankings",props:["step"],data:function(){return{rank:[],userInfo:{}}},methods:{onceMore:function(){this.$emit("onceMore",1)}},mounted:function(){var t=this;d().then(function(e){t.rank=e.data||[]}).catch(function(t){console.log(t)}),d(window.localStorage.getItem("hamster_nickname")).then(function(e){t.userInfo=e.data[0]}).catch(function(t){console.log(t)})},watch:{step:function(t){var e=this;3===t&&(d().then(function(t){e.rank=t.data||[]}).catch(function(t){console.log(t)}),d(window.localStorage.getItem("hamster_nickname")).then(function(t){e.userInfo=t.data[0]}).catch(function(t){console.log(t)}))}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rank"},[s("h3",[t._v("排行榜")]),t._v(" "),s("div",{staticClass:"rankData"},[s("table",[t._m(0),t._v(" "),s("tbody",t._l(t.rank,function(e){return s("tr",[s("td",[t._v(t._s(e.nickname))]),t._v(" "),s("td",[t._v(t._s(e.use_time))]),t._v(" "),s("td",[t._v(t._s(e.ranking))]),t._v(" "),t._m(1,!0)])}))])]),t._v(" "),s("div",{staticClass:"userInfo"},[s("span",{staticClass:"name"},[t._v(t._s(t.userInfo.nickname))]),t._v(" "),s("span",{staticClass:"score"},[t._v(t._s("null"===t.userInfo.use_time?0:t.userInfo.use_time))])]),t._v(" "),s("div",{staticClass:"footer"},[s("button",{staticClass:"onceMore",on:{touchstart:t.onceMore}},[t._v("再来一局")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("昵称")]),this._v(" "),e("th",[this._v("得分")]),this._v(" "),e("th",[this._v("排行")]),this._v(" "),e("th",[this._v("奖励")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("a",{staticClass:"exchange"},[this._v("兑换")])])}]};var w=s("C7Lr")(g,_,!1,function(t){s("7KPn")},"data-v-41613bfa",null).exports,x=s("cMFt"),b=function(t,e){return Math.random()*(e-t)+t},C=(s.n(x).a.length,{}),I=void 0,y=void 0,k=void 0,M=void 0,T=void 0,E=void 0,O={name:"HamsterItem",props:["step"],data:function(){return{letters:[{letter:"a",showTime:0},{letter:"b",showTime:0},{letter:"c",showTime:0},{letter:"d",showTime:0},{letter:"e",showTime:0},{letter:"f",showTime:0},{letter:"g",showTime:0},{letter:"h",showTime:0},{letter:"i",showTime:0}],time:6e4,score:0,holeNum:9,isBegin:!1,selectWord:"",isGameOver:!1,wordsList:[],showIndex:-1,userInfo:{},isReady:!1}},computed:{countDown:function(){var t=Math.floor(this.time/1e3/60);return t+"′"+(this.time-60*t*1e3)/1e3+"″"}},watch:{step:function(t){2===t&&(this.getWordList(10),this.getUserInfo(),setTimeout(function(){E.play()},1e3))}},beforeDestroy:function(){clearTimeout(I),clearTimeout(y),clearTimeout(k)},mounted:function(){M=this.$refs.clickMusic,T=this.$refs.wrongMusic,E=this.$refs.bgMusic,this.getWordList(10),this.getUserInfo()},methods:{getUserInfo:function(){var t=this;d(window.localStorage.getItem("hamster_nickname")).then(function(e){t.userInfo=e.data[0]}).catch(function(t){console.log(t)})},togglePlay:function(){var t=this.$refs.bgMusic,e=this.$refs.bgMusicBox;t.paused?(t.play(),e.classList.add("bgMusicAnimate")):(t.pause(),e.classList.remove("bgMusicAnimate"))},playAudioSource:function(t,e){var s=this;return l()(a.a.mark(function n(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(E.paused){s.next=8;break}return s.next=3,E.pause();case 3:return s.next=5,document.querySelector("#"+e.word+t).play();case 5:setTimeout(function(){E.play()},1e3),s.next=9;break;case 8:document.querySelector("#"+e.word+t).play();case 9:case"end":return s.stop()}},n,s)}))()},initData:function(){this.isBegin=!1,this.selectWord="",this.isGameOver=!1,this.wordsList=[],this.showIndex=-1,this.score=0,this.time=6e4},submitScore:function(){!function(t){m.post("/updateUser_hamster",t)}({nickname:window.localStorage.getItem("hamster_nickname"),use_time:"null"===this.userInfo.use_time?this.score+"":+this.userInfo.use_time+this.score+"",time_stamp:"null"===this.userInfo.use_time?this.score+"":+this.userInfo.use_time+this.score+""})},gameOver:function(){clearTimeout(I),clearTimeout(y),clearTimeout(k),this.isGameOver=!0,this.submitScore()},stopBgMusic:function(){E.pause()},goToRank:function(){this.stopBgMusic(),this.initData(),this.hideAllHamster(),this.$emit("rank",3)},begin:function(){this.isBegin=!0,clearInterval(I),clearInterval(y),clearInterval(k),this.showIndex%5==0&&0!==this.showIndex&&(console.log(this.showIndex,"showIndex is :====="),this.getWordList(5,!0)),this.showIndex+=1,C=this.wordsList[this.showIndex],console.log(this.wordsList,this.showIndex,C,"trueWordObj is :====="),this.playAudioSource(this.showIndex,C),this.giveLetter(C),this.hideHamster()},hideHamster:function(){var t=this,e=this.letters.length;y=setInterval(function(){for(var s=0;s<e;s++){var n=t.letters[s];n.letter&&n.showTime&&Date.now()-n.showTime>3e3&&(t.letters.splice(s,1,{letter:"",showTime:0}),t.toggleHamster(s,!1))}},2500)},hideAllHamster:function(){for(var t=this.letters.length,e=0;e<t;e++)this.letters.splice(e,1,{letter:"",showTime:0}),this.toggleHamster(e,!1)},getWordList:function(t){var e=this;return l()(a.a.mark(function s(){var n,r,i,o;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(h.b)((a=t,m.get("/getRandomWords_hamster?count="+a)));case 2:if(n=s.sent,r=c()(n,2),i=r[0],o=r[1],!i){s.next=8;break}return s.abrupt("return",!1);case 8:o.data.forEach(function(t){e.wordsList.push(t)}),e.isReady=!0;case 10:case"end":return s.stop()}var a},s,e)}))()},nextWord:function(){this.isBegin&&(this.selectWord="",this.begin())},back:function(){this.selectWord=this.selectWord.substr(0,this.selectWord.length-1)},showLetter:function(t,e){var s=this;this.letters.splice(t,1,{letter:e,showTime:Date.now()}),"25px"===this.$refs.hamster[t].style.top?(this.toggleHamster(t,!1),setTimeout(function(){s.toggleHamster(t,!0)},400)):this.toggleHamster(t,!0)},giveLetter:function(t){var e=this,s=t.word;I=setInterval(function(){var t=Math.floor(b(0,9)),n=Math.floor(b(0,s.length)),r=s[n];e.showLetter(t,r),e.time<=0&&e.gameOver()},500),k=setInterval(function(){e.time-=1e3;var t=s[e.selectWord.length],n=Math.floor(b(0,9));e.showLetter(n,t)},1e3)},toggleHamster:function(t,e){this.$refs.hamster[t].style.top=e?"25px":"120px"},musicPlay:function(){M.play()},trueWord:function(t){if(this.selectWord+=t,this.selectWord===C.word){this.score++,this.nextWord();var e=setTimeout(function(){clearTimeout(e)},1e3)}},isWrongWord:function(t){if(C.word[this.selectWord.length]!==t)return T.play(),!0},initLetter:function(t,e){this.letters.splice(t,1,{letter:"",showTime:0})},chooseWord:function(t,e){if(!this.isBegin||!e)return!1;this.toggleHamster(t,!1),this.initLetter(t,e),this.isWrongWord(e)||(this.musicPlay(),this.trueWord(e))},onceMore:function(){this.initData(),this.getWordList(10)}}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("header",{staticClass:"header"},[n("div",{staticClass:"timeAndScore"},[n("div",{staticClass:"time"},[t._v("倒计时："+t._s(t.countDown))]),t._v(" "),n("div",{staticClass:"score"},[t._v("得分："+t._s(t.score))])]),t._v(" "),n("div",{ref:"bgMusicBox",staticClass:"bgMusic bgMusicAnimate",attrs:{id:"bgMusicBox"},on:{touchstart:t.togglePlay}},[n("audio",{ref:"bgMusic",attrs:{loop:"",autoplay:""}},[n("source",{attrs:{src:s("aHPK")}}),t._v("\n        您的浏览器不支持 audio 元素。\n      ")])])]),t._v(" "),n("div",{staticClass:"selectWord"},[n("span",[t._v("\n      "+t._s(t.selectWord)+"\n    ")])]),t._v(" "),t._l(t.wordsList,function(e,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showIndex===s,expression:"showIndex===index"}],staticClass:"wordImg"},[n("span",{staticClass:"voice",on:{touchstart:function(n){t.playAudioSource(s,e)}}}),t._v(" "),n("img",{attrs:{src:e.img_url,alt:"单词对应的图片"}}),t._v(" "),n("span",{staticClass:"next",on:{touchstart:t.nextWord}}),t._v(" "),n("audio",{attrs:{hidden:"",id:""+e.word+s,controls:""}},[n("source",{attrs:{src:e.resource_url}}),t._v("\n      您的浏览器不支持 audio 元素。\n    ")])])}),t._v(" "),n("div",{staticClass:"content"},[n("audio",{ref:"clickMusic",attrs:{hidden:"",controls:""}},[n("source",{attrs:{src:s("5RSw")}}),t._v("\n      您的浏览器不支持 audio 元素。\n    ")]),t._v(" "),n("audio",{ref:"wrongMusic",attrs:{hidden:"",controls:""}},[n("source",{attrs:{src:s("sNYB")}}),t._v("\n      您的浏览器不支持 audio 元素。\n    ")]),t._v(" "),n("div",{staticClass:"hole-box"},[n("div",{staticClass:"first-row"},t._l(t.letters,function(e,s){return 0===s||1===s||2===s?n("div",{staticClass:"hole",on:{touchstart:function(n){t.chooseWord(s,e.letter)}}},[n("div",{staticClass:"hole-img"}),t._v(" "),n("div",{staticClass:"slice-hole-img"}),t._v(" "),n("div",{ref:"hamster",refInFor:!0,staticClass:"hamster"},[n("span",{staticClass:"word"},[t._v(t._s(e.letter))])])]):t._e()})),t._v(" "),n("div",{staticClass:"two-row"},t._l(t.letters,function(e,s){return 3===s||4===s||5===s?n("div",{staticClass:"hole",on:{touchstart:function(n){t.chooseWord(s,e.letter)}}},[n("div",{staticClass:"hole-img"}),t._v(" "),n("div",{staticClass:"slice-hole-img"}),t._v(" "),n("div",{ref:"hamster",refInFor:!0,staticClass:"hamster"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.letter,expression:"letter.letter"}],staticClass:"word"},[t._v(t._s(e.letter))])])]):t._e()})),t._v(" "),n("div",{staticClass:"three-row"},t._l(t.letters,function(e,s){return 6===s||7===s||8===s?n("div",{staticClass:"hole",on:{touchstart:function(n){t.chooseWord(s,e.letter)}}},[n("div",{staticClass:"hole-img"}),t._v(" "),n("div",{staticClass:"slice-hole-img"}),t._v(" "),n("div",{ref:"hamster",refInFor:!0,staticClass:"hamster"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.letter,expression:"letter.letter"}],staticClass:"word"},[t._v("\n              "+t._s(e.letter)+"\n              "),n("i")])])]):t._e()}))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isGameOver,expression:"isGameOver"}],staticClass:"gameOver"},[n("p",{staticClass:"score"},[t._v("\n      得分:"+t._s(t.score)+"\n    ")]),t._v(" "),n("div",{staticClass:"buttonBox"},[n("button",{staticClass:"onceMore",on:{touchstart:t.onceMore}}),t._v(" "),n("button",{staticClass:"rank",on:{touchstart:t.goToRank}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isBegin,expression:"!isBegin"}],staticClass:"go"},[t.isReady?n("button",{staticClass:"play",on:{touchstart:t.begin}}):n("button",{staticClass:"wait"})])],2)},staticRenderFns:[]};var S={name:"hamster",components:{gameStart:p,rankings:w,hamsterItem:s("C7Lr")(O,A,!1,function(t){s("XiUR")},"data-v-05b4d934",null).exports},data:function(){return{step:1}},methods:{play:function(t){this.step=t}}},N={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[1===t.step?s("gameStart",{attrs:{step:t.step},on:{play:t.play}}):t._e(),t._v(" "),2===t.step?s("hamsterItem",{attrs:{step:t.step},on:{rank:t.play}}):t._e(),t._v(" "),3===t.step?s("rankings",{attrs:{step:t.step},on:{onceMore:t.play}}):t._e()],1)},staticRenderFns:[]};var R={name:"Hamster",components:{hamster:s("C7Lr")(S,N,!1,function(t){s("r+57")},"data-v-e1adb960",null).exports}},W={render:function(){var t=this.$createElement;return(this._self._c||t)("hamster",{tag:"components"})},staticRenderFns:[]};var L=s("C7Lr")(R,W,!1,function(t){s("4X9d")},"data-v-386684b6",null);e.default=L.exports},oMO2:function(t,e,s){s("A1pn"),s("IsPG"),t.exports=s("tcIe")},"r+57":function(t,e){},sNYB:function(t,e,s){t.exports=s.p+"static/media/wrong.acd64e8.wav"},tcIe:function(t,e,s){var n=s("93K8"),r=s("YW8S");t.exports=s("AKd3").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}}});
//# sourceMappingURL=3.7b75c9243c854f957554.js.map